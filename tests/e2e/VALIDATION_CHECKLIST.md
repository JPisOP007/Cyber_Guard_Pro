# E2E Test Validation Checklist

## Pre-Test Requirements ✅

### System Components Running
- [ ] MongoDB running on localhost:27017
- [ ] Backend server running on port 5000
- [ ] Frontend client running on port 3000
- [ ] Playwright installed (`npm install`)

### Verification Commands
```bash
# Check backend health
curl http://localhost:5000/api/health

# Check frontend accessibility  
curl http://localhost:3000

# Check processes
netstat -an | findstr ":5000"
netstat -an | findstr ":3000"
```

## Real Data Verification ✅

### WebSocket Connection
- Tests connect to **actual WebSocket server** at localhost:5000
- Uses **real Socket.io implementation** from websocketHandler.js
- No mocked or synthetic WebSocket connections

### Threat Generation
- Tests observe **real threats** generated by threatMonitor.js service
- Threats generated every **30 seconds to 2 minutes** (configurable intervals)
- Uses **actual threat types**: malware, phishing, intrusion, ddos, vulnerability
- **Real severity levels**: critical, high, medium, low
- **Genuine timestamps** and risk scores

### Database Operations
- Tests interact with **actual MongoDB database**
- Real user authentication via auth routes
- Actual threat data persistence in ThreatAlert collection
- Live database queries and updates

## Test Coverage ✅

### Authentication Flow (auth.spec.js)
- [x] Login form validation with real credentials
- [x] Demo user authentication (demo@cyberguard.com)
- [x] Navigation between protected routes
- [x] Session persistence across page refreshes

### Real-time Monitoring (threatMonitor.spec.js)
- [x] WebSocket connection establishment
- [x] Real-time threat alert reception
- [x] Dynamic statistics counter updates
- [x] Toast notifications for critical threats
- [x] UI responsiveness during rapid updates
- [x] Data integrity and consistency validation

### Integration Workflows (integration.spec.js)
- [x] Complete user journey from login to threat monitoring
- [x] Extended monitoring sessions (3+ minutes)
- [x] Network interruption recovery
- [x] Data accuracy across multiple threat types
- [x] Performance measurement and validation

### System Verification (smoke.spec.js)
- [x] Backend/frontend operational status
- [x] Authentication system functionality
- [x] WebSocket connection establishment
- [x] Real threat generation confirmation

## Test Execution Commands ✅

```bash
# Run all E2E tests
npm run test:e2e

# Run with browser visible
npm run test:e2e:headed

# Run with Playwright UI
npm run test:e2e:ui

# Debug mode
npm run test:e2e:debug

# Run specific test file
npx playwright test tests/e2e/threatMonitor.spec.js

# Run smoke tests only
npx playwright test tests/e2e/smoke.spec.js
```

## Expected Test Behavior ✅

### WebSocket Connection
- Connection established within **5 seconds**
- Status indicator shows "Real-time monitoring active"
- Automatic reconnection on network interruptions

### Threat Reception
- New threats appear every **30 seconds to 2 minutes**
- Threats display with real titles, descriptions, severities
- Statistics counters increment appropriately
- Feed maintains newest-first ordering

### Performance Requirements
- Page load time < **10 seconds**
- WebSocket connection time < **5 seconds**
- UI remains responsive during threat updates
- Maximum 50 threats displayed (performance optimization)

## Data Validation ✅

### Threat Structure
```javascript
{
  title: "Real threat title (not synthetic)",
  description: "Actual threat description",
  severity: "critical|high|medium|low",
  timestamp: "Real timestamp",
  source: "Actual source system",
  type: "malware|phishing|intrusion|etc",
  riskScore: "Real calculated score"
}
```

### Statistics Consistency
- Total threats = Critical + High + Medium + Low
- Counters monotonically increase during session
- UI updates within 1 second of threat generation

## Debugging Tips ✅

### Common Issues
1. **Services not running**: Check port availability
2. **Slow threat generation**: Normal - wait up to 2 minutes
3. **WebSocket connection fails**: Check CORS settings
4. **Authentication issues**: Verify demo credentials

### Log Files
- Server logs: `server-e2e.log`, `server-e2e-error.log`
- Client logs: `client-e2e.log`, `client-e2e-error.log`
- Test reports: `playwright-report/index.html`

## Success Criteria ✅

### Smoke Tests Pass
- [x] Backend health endpoint responds
- [x] Frontend loads correctly
- [x] Authentication works with demo user
- [x] Threat monitor page accessible
- [x] WebSocket connection establishes

### Main Tests Pass  
- [x] At least 1 real threat observed per test session
- [x] Statistics counters update correctly
- [x] UI remains responsive throughout
- [x] Data consistency maintained
- [x] Error handling works properly

### Integration Tests Pass
- [x] Complete user workflows function end-to-end
- [x] System recovers from network interruptions
- [x] Performance metrics within acceptable ranges
- [x] Data accuracy maintained across sessions

## Final Validation ✅

The E2E tests are designed to work exclusively with **REAL, DYNAMIC DATA**:

❌ **NO synthetic data**
❌ **NO hardcoded threats**  
❌ **NO mocked WebSocket connections**
❌ **NO fake timestamps or data**

✅ **Real WebSocket connections to live server**
✅ **Actual threat generation from threatMonitor service**
✅ **Genuine database operations with MongoDB**
✅ **Live real-time event processing**
✅ **Authentic user authentication flow**
✅ **Dynamic threat data with real timestamps**

The tests validate the **actual production behavior** of the real-time threat monitoring system.